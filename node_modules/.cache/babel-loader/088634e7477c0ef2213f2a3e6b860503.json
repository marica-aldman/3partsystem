{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\admincomp\\\\AddSalon.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nclass AddMovie extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      blurb: \"\",\n      price: \"\",\n      imageFile: \"\",\n      imageID: undefined\n    };\n  }\n\n  async eventChangeTitle(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  async eventChangeBlurb(e) {\n    this.setState({\n      blurb: e.target.value\n    });\n  }\n\n  async eventChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  async eventChangeImage(e) {\n    this.setState({\n      imageFile: e.target.files[0]\n    });\n  }\n\n  async onSubmitHandle(e) {\n    e.preventDefault(); // image upload first\n\n    const data = new FormData();\n    data.append(\"files\", this.state.imageFile);\n    const res = await axios.post('http://localhost:1337/upload/', data);\n    this.setState({\n      imageID: res.data[0].id\n    }); // add data to movies, dont forget to use the return data for the image\n\n    await axios.post('http://localhost:1337/movies/', {\n      title: this.state.title,\n      description: this.state.blurb,\n      price: this.state.price,\n      image: [res.data[0]]\n    });\n  }\n\n  render() {\n    if (this.props.aUserGroup != \"admin\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }\n      });\n    }\n\n    let divtext;\n\n    if (this.state.imageID) {\n      divtext = \"Filmen har lagts till i databasen\";\n    } else {\n      divtext = \"\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormMain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, divtext), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"addForm\",\n      onSubmit: this.onSubmitHandle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 29\n      }\n    }, \"Titel\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      onChange: this.eventChangeTitle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }\n    }, \"Pris\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"price\",\n      onChange: this.eventChangePrice.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }, \"Bild\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"imageFile\",\n      onChange: this.eventChangeImage.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, \"Beskrivning\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormTextArea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"blurb\",\n      onChange: this.eventChangeBlurb.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormButtonDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"addFormButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 33\n      }\n    }, \"Save\"))))));\n  }\n\n}\n\nexport default AddMovie;","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/admincomp/AddSalon.js"],"names":["React","Component","axios","Redirect","AddMovie","constructor","props","state","title","blurb","price","imageFile","imageID","undefined","eventChangeTitle","e","setState","target","value","eventChangeBlurb","eventChangePrice","eventChangeImage","files","onSubmitHandle","preventDefault","data","FormData","append","res","post","id","description","image","render","aUserGroup","divtext","bind"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass AddMovie extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title: \"\",\r\n            blurb: \"\",\r\n            price: \"\",\r\n            imageFile: \"\",\r\n            imageID: undefined,\r\n        }\r\n    }\r\n\r\n    async eventChangeTitle(e) {\r\n        this.setState({ title: e.target.value })\r\n    }\r\n\r\n    async eventChangeBlurb(e) {\r\n        this.setState({ blurb: e.target.value })\r\n    }\r\n\r\n    async eventChangePrice(e) {\r\n        this.setState({ price: e.target.value })\r\n    }\r\n\r\n    async eventChangeImage(e) {\r\n        this.setState({ imageFile: e.target.files[0] })\r\n    }\r\n\r\n    async onSubmitHandle(e) {\r\n        e.preventDefault()\r\n        // image upload first\r\n\r\n        const data = new FormData();\r\n\r\n        data.append(\"files\", this.state.imageFile)\r\n\r\n        const res = await axios\r\n            .post('http://localhost:1337/upload/', data)\r\n        this.setState({ imageID: res.data[0].id })\r\n        // add data to movies, dont forget to use the return data for the image\r\n        await axios.post('http://localhost:1337/movies/', {\r\n            title: this.state.title,\r\n            description: this.state.blurb,\r\n            price: this.state.price,\r\n            image: [res.data[0]]\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.aUserGroup != \"admin\") {\r\n            return (<Redirect to=\"/\" />)\r\n        }\r\n        let divtext;\r\n        if (this.state.imageID) {\r\n            divtext = \"Filmen har lagts till i databasen\"\r\n        } else {\r\n            divtext = \"\"\r\n        }\r\n        return (\r\n            <div className={\"addFormMain\"}>\r\n                <div className={\"addFormWrapper\"}>\r\n                    <div className={\"addFormText\"}>\r\n                        {divtext}\r\n                    </div>\r\n                    <div className={\"addFormContainer\"}>\r\n                        <form className={\"addForm\"} onSubmit={this.onSubmitHandle.bind(this)}>\r\n                            <div>Titel</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"text\" name=\"title\" onChange={this.eventChangeTitle.bind(this)}></input>\r\n                            </div>\r\n                            <div>Pris</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"number\" name=\"price\" onChange={this.eventChangePrice.bind(this)}></input>\r\n                            </div>\r\n                            <div>Bild</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"file\" name=\"imageFile\" onChange={this.eventChangeImage.bind(this)}></input>\r\n                            </div>\r\n                            <div>Beskrivning</div>\r\n                            <div className={\"addFormTextArea\"}>\r\n                                <textarea name=\"blurb\" onChange={this.eventChangeBlurb.bind(this)}></textarea>\r\n                            </div>\r\n                            <div className={\"addFormButtonDiv\"}>\r\n                                <button type=\"submit\" className={\"addFormButton\"}>Save</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default AddMovie;"]},"metadata":{},"sourceType":"module"}