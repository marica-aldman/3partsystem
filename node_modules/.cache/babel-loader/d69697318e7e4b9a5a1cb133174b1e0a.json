{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\admincomp\\\\EditMovie.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nclass EditMovie extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: null || JSON.parse(localStorage.getItem('changeMovie')),\n      title: \"\",\n      blurb: \"\",\n      price: \"\",\n      imageFile: \"\",\n      imageID: undefined\n    };\n  }\n\n  async eventChangeTitle(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  async eventChangeBlurb(e) {\n    this.setState({\n      blurb: e.target.value\n    });\n  }\n\n  async eventChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  async eventChangeImage(e) {\n    this.setState({\n      imageFile: e.target.files[0]\n    });\n  }\n\n  async onSubmitHandle(e) {\n    e.preventDefault(); // image upload first\n\n    const data = new FormData();\n    var res = undefined;\n\n    if (this.state.imageFile) {\n      data.append(\"files\", this.state.imageFile);\n      res = await axios.post('http://localhost:1337/upload/', data);\n      this.setState({\n        imageID: res.data[0].id\n      }); // add data to movies, dont forget to use the return data for the image\n\n      await axios.put('http://localhost:1337/movies/' + this.state.movie.id, {\n        title: this.state.title,\n        description: this.state.blurb,\n        price: this.state.price,\n        image: [res.data[0]]\n      });\n    } else {\n      this.setState({\n        imageID: \"No image upload\"\n      }); // add data to movies, dont forget to use the return data for the image\n\n      await axios.put('http://localhost:1337/movies/' + this.state.movie.id, {\n        title: this.state.title,\n        description: this.state.blurb,\n        price: this.state.price\n      });\n    }\n  }\n\n  render() {\n    if (this.props.aUserGroup != \"admin\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      });\n    }\n\n    let divtext;\n\n    if (this.state.imageID) {\n      divtext = \"Filmen har korrigerats till i databasen\";\n    } else {\n      divtext = \"\";\n    }\n\n    console.log(this.state.movie[0].image[0].formats.thumbnail.url);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormMain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, divtext), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"addForm\",\n      onSubmit: this.onSubmitHandle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }, \"Titel\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      onChange: this.eventChangeTitle.bind(this),\n      defaultValue: this.state.movie[0].title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 29\n      }\n    }, \"Pris\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"price\",\n      onChange: this.eventChangePrice.bind(this),\n      initial: this.state.movie.price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, \"Bild\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"http://localhost:1337\" + this.state.movie[0].image[0].formats.thumbnail.url,\n      className: \"mini-pic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"imageFile\",\n      onChange: this.eventChangeImage.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }, \"Beskrivning\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormTextArea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"blurb\",\n      onChange: this.eventChangeBlurb.bind(this),\n      initial: this.state.movie.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormButtonDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"addFormButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, \"Save\"))))));\n  }\n\n}\n\nexport default EditMovie;","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/admincomp/EditMovie.js"],"names":["React","Component","axios","Redirect","EditMovie","constructor","props","state","movie","JSON","parse","localStorage","getItem","title","blurb","price","imageFile","imageID","undefined","eventChangeTitle","e","setState","target","value","eventChangeBlurb","eventChangePrice","eventChangeImage","files","onSubmitHandle","preventDefault","data","FormData","res","append","post","id","put","description","image","render","aUserGroup","divtext","console","log","formats","thumbnail","url","bind"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass EditMovie extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            movie: null || JSON.parse(localStorage.getItem('changeMovie')),\r\n            title: \"\",\r\n            blurb: \"\",\r\n            price: \"\",\r\n            imageFile: \"\",\r\n            imageID: undefined,\r\n        }\r\n    }\r\n\r\n    async eventChangeTitle(e) {\r\n        this.setState({ title: e.target.value })\r\n    }\r\n\r\n    async eventChangeBlurb(e) {\r\n        this.setState({ blurb: e.target.value })\r\n    }\r\n\r\n    async eventChangePrice(e) {\r\n        this.setState({ price: e.target.value })\r\n    }\r\n\r\n    async eventChangeImage(e) {\r\n        this.setState({ imageFile: e.target.files[0] })\r\n    }\r\n\r\n    async onSubmitHandle(e) {\r\n        e.preventDefault()\r\n        // image upload first\r\n\r\n        const data = new FormData();\r\n        var res = undefined;\r\n        if (this.state.imageFile) {\r\n            data.append(\"files\", this.state.imageFile)\r\n\r\n            res = await axios\r\n                .post('http://localhost:1337/upload/', data)\r\n            this.setState({ imageID: res.data[0].id })\r\n\r\n            // add data to movies, dont forget to use the return data for the image\r\n            await axios.put('http://localhost:1337/movies/' + this.state.movie.id, {\r\n                title: this.state.title,\r\n                description: this.state.blurb,\r\n                price: this.state.price,\r\n                image: [res.data[0]]\r\n            })\r\n        } else {\r\n            this.setState({ imageID: \"No image upload\" })\r\n\r\n            // add data to movies, dont forget to use the return data for the image\r\n            await axios.put('http://localhost:1337/movies/' + this.state.movie.id, {\r\n                title: this.state.title,\r\n                description: this.state.blurb,\r\n                price: this.state.price,\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.aUserGroup != \"admin\") {\r\n            return (<Redirect to=\"/\" />)\r\n        }\r\n        let divtext;\r\n        if (this.state.imageID) {\r\n            divtext = \"Filmen har korrigerats till i databasen\"\r\n        } else {\r\n            divtext = \"\"\r\n        }\r\n        console.log(this.state.movie[0].image[0].formats.thumbnail.url)\r\n        return (\r\n            <div className={\"addFormMain\"}>\r\n                <div className={\"addFormWrapper\"}>\r\n                    <div className={\"addFormText\"}>\r\n                        {divtext}\r\n                    </div>\r\n                    <div className={\"addFormContainer\"}>\r\n                        <form className={\"addForm\"} onSubmit={this.onSubmitHandle.bind(this)}>\r\n                            <div>Titel</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"text\" name=\"title\" onChange={this.eventChangeTitle.bind(this)} defaultValue={this.state.movie[0].title}></input>\r\n                            </div>\r\n                            <div>Pris</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"number\" name=\"price\" onChange={this.eventChangePrice.bind(this)} initial={this.state.movie.price}></input>\r\n                            </div>\r\n                            <div>Bild</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <img src={\"http://localhost:1337\" + this.state.movie[0].image[0].formats.thumbnail.url} className={\"mini-pic\"} />\r\n                                <input type=\"file\" name=\"imageFile\" onChange={this.eventChangeImage.bind(this)}></input>\r\n                            </div>\r\n                            <div>Beskrivning</div>\r\n                            <div className={\"addFormTextArea\"}>\r\n                                <textarea name=\"blurb\" onChange={this.eventChangeBlurb.bind(this)} initial={this.state.movie.description}></textarea>\r\n                            </div>\r\n                            <div className={\"addFormButtonDiv\"}>\r\n                                <button type=\"submit\" className={\"addFormButton\"}>Save</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default EditMovie;"]},"metadata":{},"sourceType":"module"}