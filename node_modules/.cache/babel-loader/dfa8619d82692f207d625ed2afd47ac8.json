{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\admincomp\\\\EditShedule.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect, withRouter } from \"react-router-dom\";\n\nclass EditShedule extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleMovie = e => {\n      axios.get('http://localhost:1337/movies/' + e.target.value).then(resM => {\n        console.log(resM);\n        this.setState({\n          movie: resM.data\n        });\n      });\n    };\n\n    this.state = {\n      date: null || JSON.parse(localStorage.getItem('changeShedule'))\n    };\n  }\n\n  async componentDidMount() {\n    if (localStorage.getItem('salonSaved')) {\n      window.location.reload(false);\n    }\n\n    localStorage.removeItem('salonSaved');\n    const res1 = await axios.get('http://localhost:1337/movies/');\n    const res2 = await axios.get('http://localhost:1337/movies/1');\n    this.setState({\n      movies: res1.data,\n      movie: res2.data\n    });\n  }\n\n  onSubmitHandleSaveDate(e) {\n    // get the movie\n    axios.put('http://localhost:1337/dates/' + this.state.date.id, {\n      movie: this.state.movie\n    });\n    localStorage.removeItem('changeShedule');\n    this.props.history.push(\"/mod/shedules\");\n  }\n\n  render() {\n    if (this.props.aUserGroup != \"admin\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }\n      });\n    }\n\n    console.log(this.state.date);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editSheduleMain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editSheduleWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"editShedule\",\n      onSubmit: this.onSubmitHandleSaveDate.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }\n    }, \"Salong\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, this.state.date.salon.Name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }, \"Datum\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, this.state.date.date), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 25\n      }\n    }, \"Tid\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, this.state.date.time === \"17:00:00.000\" ? \"17.00\" : this.state.date.time === \"19:30:00.000\" ? \"19.00\" : this.state.date.time === \"22:00:00.000\" ? \"22.00\" : \"Oh Dear\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"Film\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"movie\",\n      onChange: this.handleMovie,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, this.state.movies && this.state.movies.map(movie => /*#__PURE__*/React.createElement(\"option\", {\n      value: movie.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 37\n      }\n    }, movie.title)))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"Spara\"))));\n  }\n\n}\n\nexport default withRouter(EditShedule);","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/admincomp/EditShedule.js"],"names":["React","Component","axios","Redirect","withRouter","EditShedule","constructor","props","handleMovie","e","get","target","value","then","resM","console","log","setState","movie","data","state","date","JSON","parse","localStorage","getItem","componentDidMount","window","location","reload","removeItem","res1","res2","movies","onSubmitHandleSaveDate","put","id","history","push","render","aUserGroup","bind","salon","Name","time","map","title"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\n\r\nclass EditShedule extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            date: null || JSON.parse(localStorage.getItem('changeShedule')),\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        if (localStorage.getItem('salonSaved')) {\r\n            window.location.reload(false);\r\n        }\r\n        localStorage.removeItem('salonSaved');\r\n        const res1 = await axios.get('http://localhost:1337/movies/')\r\n        const res2 = await axios.get('http://localhost:1337/movies/1')\r\n        this.setState({ movies: res1.data, movie: res2.data })\r\n    }\r\n\r\n    handleMovie = (e) => {\r\n        axios.get('http://localhost:1337/movies/' + e.target.value).then((resM) => {\r\n            console.log(resM)\r\n            this.setState({ movie: resM.data })\r\n        })\r\n    }\r\n\r\n    onSubmitHandleSaveDate(e) {\r\n\r\n        // get the movie\r\n\r\n        axios.put('http://localhost:1337/dates/' + this.state.date.id, {\r\n            movie: this.state.movie\r\n        })\r\n\r\n        localStorage.removeItem('changeShedule');\r\n        this.props.history.push(\"/mod/shedules\");\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.aUserGroup != \"admin\") {\r\n            return (<Redirect to=\"/\" />)\r\n        }\r\n        console.log(this.state.date)\r\n\r\n        return (\r\n            <div className={\"editSheduleMain\"}>\r\n                <div className={\"editSheduleWrapper\"}>\r\n                    <form className={\"editShedule\"} onSubmit={this.onSubmitHandleSaveDate.bind(this)}>\r\n                        <div>\r\n                            Salong\r\n                        </div>\r\n                        <div>\r\n                            {this.state.date.salon.Name}\r\n                        </div>\r\n                        <div>\r\n                            Datum\r\n                        </div>\r\n                        <div>\r\n                            {this.state.date.date}\r\n                        </div>\r\n                        <div>\r\n                            Tid\r\n                        </div>\r\n                        <div>\r\n                            {this.state.date.time === \"17:00:00.000\" ? \"17.00\" : this.state.date.time === \"19:30:00.000\" ? \"19.00\" : this.state.date.time === \"22:00:00.000\" ? \"22.00\" : \"Oh Dear\"}\r\n                        </div>\r\n                        <div>\r\n                            Film\r\n                        </div>\r\n                        <div>\r\n                            <select name={\"movie\"} onChange={this.handleMovie}>\r\n                                {this.state.movies && this.state.movies.map((movie) =>\r\n                                    <option value={movie.id}>\r\n                                        {movie.title}\r\n                                    </option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <button type=\"submit\">Spara</button>\r\n                    </form >\r\n                </div >\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(EditShedule);"]},"metadata":{},"sourceType":"module"}