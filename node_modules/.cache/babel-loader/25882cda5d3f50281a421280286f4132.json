{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\auth\\\\LoginForm.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport firebase from \"../components/FirebaseConfig\";\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: true,\n      failedLogin: false,\n      failedRegistration: false,\n      error: \"\"\n    };\n  }\n\n  handleRegisterState(e) {\n    e.preventDefault();\n    this.setState({\n      login: false\n    });\n  }\n\n  handleLoginState(e) {\n    e.preventDefault();\n    this.setState({\n      login: true\n    });\n  }\n\n  onSubmitLogin(e) {\n    e.preventDefault();\n    const email = e.target.elements.email.value;\n    const password = e.target.elements.password.value;\n    firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n      this.setState({\n        failedLogin: false\n      });\n      this.props.changeUser(res.user.email);\n      this.props.changeUserName(res.user.displayName);\n      this.props.changeUserGroup('Customer');\n      this.props.changeShow(true);\n      this.props.history.push(\"/CustomerOverview\");\n    }).catch(error => {\n      console.log(error);\n      var failedLoginError = \"Lösenordet eller användarnamnet är inkorrekt.\";\n      this.setState({\n        failedLogin: true,\n        error: failedLoginError\n      });\n    });\n  }\n\n  onSubmitRegister(e) {\n    e.preventDefault();\n    const username = e.target.elements.name.value;\n    const email = e.target.elements.email.value;\n    const password = e.target.elements.password.value;\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(res => {\n      res.user.updateProfile({\n        displayName: username\n      });\n      this.props.changeUser(res.user.email);\n      this.props.changeUserName(res.user.displayName);\n      this.props.changeUserGroup(\"Customer\");\n      this.props.changeShow(true);\n      this.props.history.push(\"/CustomerOverview\");\n    }).catch(error => {\n      console.log(error);\n      var failedRegistrationError = \"Registrering misslyckades.\";\n      this.setState({\n        failedRegistration: true,\n        error: failedRegistrationError\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, this.state.login && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmitLogin.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, this.state.failedLogin && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 56\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }\n    }, \"Email:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, \"L\\xF6senord:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      name: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 33\n      }\n    }, \"Logga in\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }, \"Har du inget ett konto?\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      name: \"changeregister\",\n      onClick: this.handleRegisterState.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }, \"Registera dig\"))), !this.state.login && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmitRegister.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }, \"Registrera dig:\"), this.state.failedRegistration && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 63\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    }, \"Email:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"username\",\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"username\",\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 29\n      }\n    }, \"L\\xF6senord:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      name: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      name: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, \"Registera\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, \"Har du redan ett konto?\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.handleLoginState.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, \"Logga in ist\\xE4llet\"))));\n  }\n\n}\n\nexport default withRouter(LoginForm);","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/auth/LoginForm.js"],"names":["React","Component","withRouter","firebase","LoginForm","constructor","props","state","login","failedLogin","failedRegistration","error","handleRegisterState","e","preventDefault","setState","handleLoginState","onSubmitLogin","email","target","elements","value","password","auth","signInWithEmailAndPassword","then","res","changeUser","user","changeUserName","displayName","changeUserGroup","changeShow","history","push","catch","console","log","failedLoginError","onSubmitRegister","username","name","createUserWithEmailAndPassword","updateProfile","failedRegistrationError","render","bind","aUser","handleChangePassword"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport firebase from \"../components/FirebaseConfig\";\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            login: true,\r\n            failedLogin: false,\r\n            failedRegistration: false,\r\n            error: \"\",\r\n        }\r\n    }\r\n\r\n    handleRegisterState(e) {\r\n        e.preventDefault()\r\n        this.setState({ login: false })\r\n    }\r\n\r\n    handleLoginState(e) {\r\n        e.preventDefault()\r\n        this.setState({ login: true })\r\n    }\r\n\r\n    onSubmitLogin(e) {\r\n        e.preventDefault();\r\n\r\n        const email = e.target.elements.email.value;\r\n        const password = e.target.elements.password.value;\r\n        firebase.auth()\r\n            .signInWithEmailAndPassword(email, password).then(res => {\r\n                this.setState({ failedLogin: false });\r\n                this.props.changeUser(res.user.email);\r\n                this.props.changeUserName(res.user.displayName);\r\n                this.props.changeUserGroup('Customer');\r\n                this.props.changeShow(true);\r\n                this.props.history.push(\"/CustomerOverview\");\r\n            }).catch(error => {\r\n                console.log(error);\r\n                var failedLoginError = \"Lösenordet eller användarnamnet är inkorrekt.\";\r\n                this.setState({ failedLogin: true, error: failedLoginError });\r\n            })\r\n    }\r\n\r\n    onSubmitRegister(e) {\r\n        e.preventDefault();\r\n        const username = e.target.elements.name.value;\r\n        const email = e.target.elements.email.value;\r\n        const password = e.target.elements.password.value;\r\n        firebase.auth()\r\n            .createUserWithEmailAndPassword(email, password)\r\n            .then((res) => {\r\n                res.user.updateProfile({ displayName: username });\r\n                this.props.changeUser(res.user.email);\r\n                this.props.changeUserName(res.user.displayName);\r\n                this.props.changeUserGroup(\"Customer\");\r\n                this.props.changeShow(true);\r\n                this.props.history.push(\"/CustomerOverview\");\r\n            }).catch((error) => {\r\n                console.log(error);\r\n                var failedRegistrationError = \"Registrering misslyckades.\";\r\n                this.setState({ failedRegistration: true, error: failedRegistrationError });\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.login &&\r\n                    <div>\r\n                        <form onSubmit={this.onSubmitLogin.bind(this)}>\r\n                            {this.state.failedLogin && <div>\r\n                                {this.state.error}\r\n                            </div>\r\n                            }\r\n                            <div>\r\n                                Email:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"text\"} placeholder={\"username\"} name={\"email\"} ></input>}\r\n                                {!this.props.aUser && <input type={\"text\"} placeholder={\"username\"} name={\"email\"} ></input>}\r\n                            </div>\r\n                            <div>\r\n                                Lösenord:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"password\"} placeholder={\"password\"} ></input>}\r\n                                {!this.props.aUser && <input type={\"password\"} placeholder={\"password\"} name={\"password\"} ></input>}\r\n                            </div>\r\n                            <div>\r\n                                <button type={\"submit\"}>Logga in</button>\r\n                            </div>\r\n                        </form>\r\n                        <div>\r\n                            Har du inget ett konto?\r\n                        </div>\r\n                        <div>\r\n                            <button type={\"submit\"} name=\"changeregister\" onClick={this.handleRegisterState.bind(this)}>Registera dig</button>\r\n                        </div>\r\n                    </div>\r\n                }\r\n                {\r\n                    !this.state.login &&\r\n                    <div>\r\n                        <form onSubmit={this.onSubmitRegister.bind(this)}>\r\n                            <div>\r\n                                Registrera dig:\r\n                        </div>\r\n                            {this.state.failedRegistration && <div>\r\n                                {this.state.error}\r\n                            </div>\r\n                            }\r\n                            <div>\r\n                                Email:\r\n                        </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"email\"} placeholder={\"username\"} name={\"email\"}></input>}\r\n                                {!this.props.aUser && <input type={\"email\"} placeholder={\"username\"} name={\"email\"} ></input>}\r\n                            </div>\r\n                            <div>\r\n                                Lösenord:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"password\"} placeholder={\"password\"} name={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"password\"} placeholder={\"password\"} name={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                <button type={\"submit\"}>Registera</button>\r\n                            </div>\r\n                        </form>\r\n                        <div>\r\n                            Har du redan ett konto?\r\n                        </div>\r\n                        <div>\r\n                            <button type={\"submit\"} onClick={this.handleLoginState.bind(this)}>Logga in istället</button>\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(LoginForm);"]},"metadata":{},"sourceType":"module"}