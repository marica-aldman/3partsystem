{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\auth\\\\LoginForm.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: true,\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      failedLogin: false,\n      failedRegistration: false,\n      error: \"\"\n    };\n  }\n\n  handleChangeUsername(e) {\n    this.setState({\n      username: e.target.value\n    });\n  }\n\n  handleChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  handleChangePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleRegisterState(e) {\n    e.preventDefault();\n    this.setState({\n      login: false\n    });\n  }\n\n  handleLoginState(e) {\n    e.preventDefault();\n    this.setState({\n      login: true\n    });\n  }\n\n  onSubmitLogin(e) {\n    e.preventDefault();\n    const email = e.target.elements.email.value;\n    const password = e.target.elements.password.value;\n    firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n      this.props.userCredentrial(res.user.email);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  onSubmitRegister(e) {\n    e.preventDefault();\n    const email = e.target.elements.email.value;\n    const password = e.target.elements.password.value;\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(res => {\n      this.props.userCredentrial(res.user.email);\n      this.setState({\n        failedLogin: false\n      });\n      this.props.changeUser(res.user.email);\n      this.props.changeUserGroup('Customer');\n      this.props.changeShow(true);\n    });\n  }\n\n  handleSubmitLogin(e) {\n    e.preventDefault();\n    axios.post('http://localhost:1337/auth/local', {\n      identifier: this.state.username,\n      password: this.state.password\n    }).then(res => {\n      this.setState({\n        failedLogin: false\n      });\n      this.props.changeUserAuth(res.data.jwt);\n      this.props.changeUser(res.data.user.id);\n      this.props.changeUserGroup(res.data.user.role.name);\n      this.props.changeShow(true);\n    }).catch(error => {\n      console.log(error);\n      var failedLoginError = \"Lösenordet eller användarnamnet är inkorrekt.\";\n      this.setState({\n        failedLogin: true,\n        error: failedLoginError\n      });\n    });\n  }\n\n  handleSubmitRegister(e) {\n    e.preventDefault();\n    axios.post('http://localhost:1337/auth/local/register', {\n      username: this.state.username,\n      email: this.state.email,\n      password: this.state.password\n    }).then(res => {\n      this.setState({\n        failedRegistration: false\n      });\n      this.props.changeUserAuth(res.data.jwt);\n      this.props.changeUser(res.data.user.id);\n      this.props.changeShow(true);\n    }).catch(error => {\n      console.log(error);\n      var failedRegistrationError = \"Registrering misslyckades.\";\n      this.setState({\n        failedRegistration: true,\n        error: failedRegistrationError\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, this.state.login && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmitLogin.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, this.state.failedLogin && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 56\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, \"Anv\\xE4ndarnamn:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      onChange: this.handleChangeUsername.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      onChange: this.handleChangeUsername.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, \"L\\xF6senord:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.handleSubmitLogin.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 33\n      }\n    }, \"Logga in\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, \"Har du inget ett konto?\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      name: \"changeregister\",\n      onClick: this.handleRegisterState.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, \"Registera dig\"))), !this.state.login && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmitRegister.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, \"Registrera dig:\"), this.state.failedRegistration && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 63\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, \"Anv\\xE4ndarnamn:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      onChange: this.handleChangeUsername.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      onChange: this.handleChangeUsername.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    }, \"Email:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"username\",\n      onChange: this.handleChangeEmail.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      placeholder: \"username\",\n      onChange: this.handleChangeEmail.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, \"L\\xF6senord:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 29\n      }\n    }, this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 54\n      }\n    }), !this.props.aUser && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.handleChangePassword.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.handleSubmitRegister.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 33\n      }\n    }, \"Registera\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }, \"Har du redan ett konto?\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.handleLoginState.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \"Logga in ist\\xE4llet\"))));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/auth/LoginForm.js"],"names":["React","Component","axios","LoginForm","constructor","props","state","login","username","email","password","failedLogin","failedRegistration","error","handleChangeUsername","e","setState","target","value","handleChangeEmail","handleChangePassword","handleRegisterState","preventDefault","handleLoginState","onSubmitLogin","elements","firebase","auth","signInWithEmailAndPassword","then","res","userCredentrial","user","catch","console","log","onSubmitRegister","createUserWithEmailAndPassword","changeUser","changeUserGroup","changeShow","handleSubmitLogin","post","identifier","changeUserAuth","data","jwt","id","role","name","failedLoginError","handleSubmitRegister","failedRegistrationError","render","bind","aUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            login: true,\r\n            username: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            failedLogin: false,\r\n            failedRegistration: false,\r\n            error: \"\",\r\n        }\r\n    }\r\n\r\n    handleChangeUsername(e) {\r\n        this.setState({ username: e.target.value })\r\n    }\r\n\r\n    handleChangeEmail(e) {\r\n        this.setState({ email: e.target.value })\r\n    }\r\n\r\n    handleChangePassword(e) {\r\n        this.setState({ password: e.target.value })\r\n    }\r\n\r\n    handleRegisterState(e) {\r\n        e.preventDefault()\r\n        this.setState({ login: false })\r\n    }\r\n\r\n    handleLoginState(e) {\r\n        e.preventDefault()\r\n        this.setState({ login: true })\r\n    }\r\n\r\n    onSubmitLogin(e) {\r\n        e.preventDefault();\r\n\r\n        const email = e.target.elements.email.value;\r\n        const password = e.target.elements.password.value;\r\n        firebase.auth()\r\n            .signInWithEmailAndPassword(email, password).then(res => {\r\n                this.props.userCredentrial(res.user.email);\r\n            }).catch((error) => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    onSubmitRegister(e) {\r\n        e.preventDefault();\r\n        const email = e.target.elements.email.value;\r\n        const password = e.target.elements.password.value;\r\n        firebase.auth()\r\n            .createUserWithEmailAndPassword(email, password)\r\n            .then((res) => {\r\n                this.props.userCredentrial(res.user.email);\r\n                this.setState({ failedLogin: false });\r\n                this.props.changeUser(res.user.email);\r\n                this.props.changeUserGroup('Customer');\r\n                this.props.changeShow(true);\r\n            })\r\n    }\r\n\r\n    handleSubmitLogin(e) {\r\n        e.preventDefault()\r\n\r\n        axios\r\n            .post('http://localhost:1337/auth/local', {\r\n                identifier: this.state.username,\r\n                password: this.state.password,\r\n            })\r\n            .then(res => {\r\n                this.setState({ failedLogin: false });\r\n                this.props.changeUserAuth(res.data.jwt);\r\n                this.props.changeUser(res.data.user.id);\r\n                this.props.changeUserGroup(res.data.user.role.name);\r\n                this.props.changeShow(true);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                var failedLoginError = \"Lösenordet eller användarnamnet är inkorrekt.\";\r\n                this.setState({ failedLogin: true, error: failedLoginError });\r\n            })\r\n    }\r\n\r\n\r\n    handleSubmitRegister(e) {\r\n        e.preventDefault()\r\n\r\n        axios\r\n            .post('http://localhost:1337/auth/local/register', {\r\n                username: this.state.username,\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n            })\r\n            .then(res => {\r\n                this.setState({ failedRegistration: false });\r\n                this.props.changeUserAuth(res.data.jwt);\r\n                this.props.changeUser(res.data.user.id);\r\n                this.props.changeShow(true);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                var failedRegistrationError = \"Registrering misslyckades.\";\r\n                this.setState({ failedRegistration: true, error: failedRegistrationError });\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.login &&\r\n                    <div>\r\n                        <form onSubmit={this.handleSubmitLogin.bind(this)}>\r\n                            {this.state.failedLogin && <div>\r\n                                {this.state.error}\r\n                            </div>\r\n                            }\r\n                            <div>\r\n                                Användarnamn:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"text\"} placeholder={\"username\"} onChange={this.handleChangeUsername.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"text\"} placeholder={\"username\"} onChange={this.handleChangeUsername.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                Lösenord:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"password\"} placeholder={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"password\"} placeholder={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                <button type={\"submit\"} onClick={this.handleSubmitLogin.bind(this)}>Logga in</button>\r\n                            </div>\r\n                        </form>\r\n                        <div>\r\n                            Har du inget ett konto?\r\n                        </div>\r\n                        <div>\r\n                            <button type={\"submit\"} name=\"changeregister\" onClick={this.handleRegisterState.bind(this)}>Registera dig</button>\r\n                        </div>\r\n                    </div>\r\n                }\r\n                {\r\n                    !this.state.login &&\r\n                    <div>\r\n                        <form onSubmit={this.handleSubmitRegister.bind(this)}>\r\n                            <div>\r\n                                Registrera dig:\r\n                        </div>\r\n                            {this.state.failedRegistration && <div>\r\n                                {this.state.error}\r\n                            </div>\r\n                            }\r\n                            <div>\r\n                                Användarnamn:\r\n                        </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"text\"} placeholder={\"username\"} onChange={this.handleChangeUsername.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"text\"} placeholder={\"username\"} onChange={this.handleChangeUsername.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                Email:\r\n                        </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"email\"} placeholder={\"username\"} onChange={this.handleChangeEmail.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"email\"} placeholder={\"username\"} onChange={this.handleChangeEmail.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                Lösenord:\r\n                            </div>\r\n                            <div>\r\n                                {this.props.aUser && <input type={\"password\"} placeholder={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                                {!this.props.aUser && <input type={\"password\"} placeholder={\"password\"} onChange={this.handleChangePassword.bind(this)}></input>}\r\n                            </div>\r\n                            <div>\r\n                                <button type={\"submit\"} onClick={this.handleSubmitRegister.bind(this)}>Registera</button>\r\n                            </div>\r\n                        </form>\r\n                        <div>\r\n                            Har du redan ett konto?\r\n                        </div>\r\n                        <div>\r\n                            <button type={\"submit\"} onClick={this.handleLoginState.bind(this)}>Logga in istället</button>\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}