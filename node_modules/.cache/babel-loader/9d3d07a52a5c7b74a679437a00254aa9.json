{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wie19\\\\react\\\\projekt\\\\src\\\\admincomp\\\\AddMovie.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nclass AddMovie extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      jwt: null || localStorage.getItem('ua'),\n      title: \"\",\n      blurb: \"\",\n      price: \"\",\n      imageFile: \"\",\n      imageID: undefined\n    };\n  }\n\n  async eventChangeTitle(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  async eventChangeBlurb(e) {\n    this.setState({\n      blurb: e.target.value\n    });\n  }\n\n  async eventChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  async eventChangeImage(e) {\n    this.setState({\n      imageFile: e.target.files[0]\n    });\n  }\n\n  async onSubmitHandle(e) {\n    e.preventDefault(); // image upload first\n\n    const data = new FormData();\n    data.append(\"files\", this.state.imageFile);\n    const res = await axios.post('http://localhost:1337/upload/', data);\n    this.setState({\n      imageID: res.data[0].id\n    });\n    console.log(this.state.jwt); // add data to movies, dont forget to use the return data for the image\n\n    const res2 = await axios.post('http://localhost:1337/movies/', {\n      data: {\n        title: this.state.title,\n        description: this.state.blurb,\n        price: this.state.price,\n        image: [res.data[0]]\n      },\n      headers: {\n        Authorization: \"Bearer \" + this.state.jwt\n      }\n    });\n    console.log(res2);\n  }\n\n  render() {\n    if (this.props.aUserGroup != \"admin\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      });\n    }\n\n    let divtext;\n\n    if (this.state.imageID) {\n      divtext = \"Filmen har lagts till i databasen\";\n    } else {\n      divtext = \"\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormMain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, divtext), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"addForm\",\n      onSubmit: this.onSubmitHandle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, \"Titel\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      onChange: this.eventChangeTitle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }\n    }, \"Pris\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"price\",\n      onChange: this.eventChangePrice.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 29\n      }\n    }, \"Bild\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"imageFile\",\n      onChange: this.eventChangeImage.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, \"Beskrivning\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormTextArea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"blurb\",\n      onChange: this.eventChangeBlurb.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addFormButtonDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"addFormButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 33\n      }\n    }, \"Save\"))))));\n  }\n\n}\n\nexport default AddMovie;","map":{"version":3,"sources":["C:/xampp/htdocs/wie19/react/projekt/src/admincomp/AddMovie.js"],"names":["React","Component","axios","Redirect","AddMovie","constructor","props","state","jwt","localStorage","getItem","title","blurb","price","imageFile","imageID","undefined","eventChangeTitle","e","setState","target","value","eventChangeBlurb","eventChangePrice","eventChangeImage","files","onSubmitHandle","preventDefault","data","FormData","append","res","post","id","console","log","res2","description","image","headers","Authorization","render","aUserGroup","divtext","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,MAAMC,QAAN,SAAuBH,SAAvB,CAAiC;AAC7BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAE,QAAQC,YAAY,CAACC,OAAb,CAAqB,IAArB,CADJ;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,KAAK,EAAE,EAHE;AAITC,MAAAA,KAAK,EAAE,EAJE;AAKTC,MAAAA,SAAS,EAAE,EALF;AAMTC,MAAAA,OAAO,EAAEC;AANA,KAAb;AAQH;;AAED,QAAMC,gBAAN,CAAuBC,CAAvB,EAA0B;AACtB,SAAKC,QAAL,CAAc;AAAER,MAAAA,KAAK,EAAEO,CAAC,CAACE,MAAF,CAASC;AAAlB,KAAd;AACH;;AAED,QAAMC,gBAAN,CAAuBJ,CAAvB,EAA0B;AACtB,SAAKC,QAAL,CAAc;AAAEP,MAAAA,KAAK,EAAEM,CAAC,CAACE,MAAF,CAASC;AAAlB,KAAd;AACH;;AAED,QAAME,gBAAN,CAAuBL,CAAvB,EAA0B;AACtB,SAAKC,QAAL,CAAc;AAAEN,MAAAA,KAAK,EAAEK,CAAC,CAACE,MAAF,CAASC;AAAlB,KAAd;AACH;;AAED,QAAMG,gBAAN,CAAuBN,CAAvB,EAA0B;AACtB,SAAKC,QAAL,CAAc;AAAEL,MAAAA,SAAS,EAAEI,CAAC,CAACE,MAAF,CAASK,KAAT,CAAe,CAAf;AAAb,KAAd;AACH;;AAED,QAAMC,cAAN,CAAqBR,CAArB,EAAwB;AACpBA,IAAAA,CAAC,CAACS,cAAF,GADoB,CAEpB;;AAEA,UAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AAEAD,IAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqB,KAAKvB,KAAL,CAAWO,SAAhC;AAEA,UAAMiB,GAAG,GAAG,MAAM7B,KAAK,CAClB8B,IADa,CACR,+BADQ,EACyBJ,IADzB,CAAlB;AAEA,SAAKT,QAAL,CAAc;AAAEJ,MAAAA,OAAO,EAAEgB,GAAG,CAACH,IAAJ,CAAS,CAAT,EAAYK;AAAvB,KAAd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5B,KAAL,CAAWC,GAAvB,EAXoB,CAYpB;;AACA,UAAM4B,IAAI,GAAG,MAAMlC,KAAK,CAAC8B,IAAN,CAAW,+BAAX,EACf;AACIJ,MAAAA,IAAI,EAAE;AACFjB,QAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KADhB;AAEF0B,QAAAA,WAAW,EAAE,KAAK9B,KAAL,CAAWK,KAFtB;AAGFC,QAAAA,KAAK,EAAE,KAAKN,KAAL,CAAWM,KAHhB;AAIFyB,QAAAA,KAAK,EAAE,CAACP,GAAG,CAACH,IAAJ,CAAS,CAAT,CAAD;AAJL,OADV;AAOIW,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAY,KAAKjC,KAAL,CAAWC;AADjC;AAPb,KADe,CAAnB;AAYA0B,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACH;;AAEDK,EAAAA,MAAM,GAAG;AAEL,QAAI,KAAKnC,KAAL,CAAWoC,UAAX,IAAyB,OAA7B,EAAsC;AAClC,0BAAQ,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACH;;AACD,QAAIC,OAAJ;;AACA,QAAI,KAAKpC,KAAL,CAAWQ,OAAf,EAAwB;AACpB4B,MAAAA,OAAO,GAAG,mCAAV;AACH,KAFD,MAEO;AACHA,MAAAA,OAAO,GAAG,EAAV;AACH;;AACD,wBACI;AAAK,MAAA,SAAS,EAAE,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAE,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAE,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKA,OADL,CADJ,eAII;AAAK,MAAA,SAAS,EAAE,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,SAAS,EAAE,SAAjB;AAA4B,MAAA,QAAQ,EAAE,KAAKjB,cAAL,CAAoBkB,IAApB,CAAyB,IAAzB,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI;AAAK,MAAA,SAAS,EAAE,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,OAAxB;AAAgC,MAAA,QAAQ,EAAE,KAAK3B,gBAAL,CAAsB2B,IAAtB,CAA2B,IAA3B,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAK,MAAA,SAAS,EAAE,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,OAA1B;AAAkC,MAAA,QAAQ,EAAE,KAAKrB,gBAAL,CAAsBqB,IAAtB,CAA2B,IAA3B,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CANJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,eAUI;AAAK,MAAA,SAAS,EAAE,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,WAAxB;AAAoC,MAAA,QAAQ,EAAE,KAAKpB,gBAAL,CAAsBoB,IAAtB,CAA2B,IAA3B,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAVJ,eAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAbJ,eAcI;AAAK,MAAA,SAAS,EAAE,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAU,MAAA,IAAI,EAAC,OAAf;AAAuB,MAAA,QAAQ,EAAE,KAAKtB,gBAAL,CAAsBsB,IAAtB,CAA2B,IAA3B,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAdJ,eAiBI;AAAK,MAAA,SAAS,EAAE,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAE,eAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CAjBJ,CADJ,CAJJ,CADJ,CADJ;AAgCH;;AArG4B;;AAwGjC,eAAexC,QAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass AddMovie extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            jwt: null || localStorage.getItem('ua'),\r\n            title: \"\",\r\n            blurb: \"\",\r\n            price: \"\",\r\n            imageFile: \"\",\r\n            imageID: undefined,\r\n        }\r\n    }\r\n\r\n    async eventChangeTitle(e) {\r\n        this.setState({ title: e.target.value })\r\n    }\r\n\r\n    async eventChangeBlurb(e) {\r\n        this.setState({ blurb: e.target.value })\r\n    }\r\n\r\n    async eventChangePrice(e) {\r\n        this.setState({ price: e.target.value })\r\n    }\r\n\r\n    async eventChangeImage(e) {\r\n        this.setState({ imageFile: e.target.files[0] })\r\n    }\r\n\r\n    async onSubmitHandle(e) {\r\n        e.preventDefault()\r\n        // image upload first\r\n\r\n        const data = new FormData();\r\n\r\n        data.append(\"files\", this.state.imageFile)\r\n\r\n        const res = await axios\r\n            .post('http://localhost:1337/upload/', data)\r\n        this.setState({ imageID: res.data[0].id })\r\n        console.log(this.state.jwt)\r\n        // add data to movies, dont forget to use the return data for the image\r\n        const res2 = await axios.post('http://localhost:1337/movies/',\r\n            {\r\n                data: {\r\n                    title: this.state.title,\r\n                    description: this.state.blurb,\r\n                    price: this.state.price,\r\n                    image: [res.data[0]]\r\n                },\r\n                headers: {\r\n                    Authorization: \"Bearer \" + this.state.jwt,\r\n                },\r\n            })\r\n        console.log(res2)\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.aUserGroup != \"admin\") {\r\n            return (<Redirect to=\"/\" />)\r\n        }\r\n        let divtext;\r\n        if (this.state.imageID) {\r\n            divtext = \"Filmen har lagts till i databasen\"\r\n        } else {\r\n            divtext = \"\"\r\n        }\r\n        return (\r\n            <div className={\"addFormMain\"}>\r\n                <div className={\"addFormWrapper\"}>\r\n                    <div className={\"addFormText\"}>\r\n                        {divtext}\r\n                    </div>\r\n                    <div className={\"addFormContainer\"}>\r\n                        <form className={\"addForm\"} onSubmit={this.onSubmitHandle.bind(this)}>\r\n                            <div>Titel</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"text\" name=\"title\" onChange={this.eventChangeTitle.bind(this)}></input>\r\n                            </div>\r\n                            <div>Pris</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"number\" name=\"price\" onChange={this.eventChangePrice.bind(this)}></input>\r\n                            </div>\r\n                            <div>Bild</div>\r\n                            <div className={\"addFormInput\"}>\r\n                                <input type=\"file\" name=\"imageFile\" onChange={this.eventChangeImage.bind(this)}></input>\r\n                            </div>\r\n                            <div>Beskrivning</div>\r\n                            <div className={\"addFormTextArea\"}>\r\n                                <textarea name=\"blurb\" onChange={this.eventChangeBlurb.bind(this)}></textarea>\r\n                            </div>\r\n                            <div className={\"addFormButtonDiv\"}>\r\n                                <button type=\"submit\" className={\"addFormButton\"}>Save</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default AddMovie;"]},"metadata":{},"sourceType":"module"}